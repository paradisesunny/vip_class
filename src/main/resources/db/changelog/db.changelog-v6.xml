<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <changeSet id="V6.0.0" author="nmy">
        <comment>点赞记录表添加字段-评论id、添加短信验证码表、医院表、专家表和用户表和评论表字段名修改</comment>
        <addColumn tableName="prad_like_record">
            <column name="lr_comment_id" type="bigint" remarks="评论记录id"/>
        </addColumn>

        <createTable tableName="sms_code" remarks="短信验证码">
            <column name="sc_id" type="bigint" autoIncrement="true" remarks="主键">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="sc_phone" type="varchar(64)" remarks="手机号"/>
            <column name="sc_code" type="varchar(64)" remarks="激活码"/>
            <column name="sc_type" type="varchar(64)" remarks="类型"/>
            <column name="sc_invalid_date" type="bigint(20)" remarks="失效时间"/>
            <column name="sc_create_date" type="bigint(20)" remarks="创建时间"/>
            <column name="sc_is_used" type="int(11)" remarks="是否使用(0:否1:是)"/>
            <column name="sc_user_id" type="bigint(20)" remarks="用户id"/>
            <column name="sc_ip_address" type="varchar(64)" remarks="IP地址"/>
            <column name="sc_send_prompt" type="varchar(255)" remarks="发送提示"/>
            <column name="sc_send_flag" type="int(11)" remarks="发送标志（0：失败；1：成功）"/>
        </createTable>

        <sqlFile path="hospital.sql" relativeToChangelogFile="true"/>


        <renameColumn tableName="prad_expert" oldColumnName="e_id" newColumnName="pe_id" remarks="主键" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_name" newColumnName="pe_name" remarks="专家名称" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_head_path" newColumnName="pe_head_path" remarks="头像缩略图" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_hospital" newColumnName="pe_hospital" remarks="医院" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_dept" newColumnName="pe_dept" remarks="科室" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_professional" newColumnName="pe_professional" remarks="职称" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_create_time" newColumnName="pe_create_time" remarks="创建时间" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_create_user_id" newColumnName="pe_create_user_id" remarks="创建人id" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_create_user_name" newColumnName="pe_create_user_name" remarks="创建人姓名" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_update_time" newColumnName="pe_update_time" remarks="更新时间" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_update_user_id" newColumnName="pe_update_user_id" remarks="更新人id" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_expert" oldColumnName="e_update_user_name" newColumnName="pe_update_user_name" remarks="更新人姓名" columnDataType="varchar(128)"></renameColumn>

        <renameColumn tableName="prad_user" oldColumnName="u_id" newColumnName="pu_id" remarks="主键" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_name" newColumnName="pu_name" remarks="用户名" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_province" newColumnName="pu_province" remarks="省份" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_city" newColumnName="pu_city" remarks="城市" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_region" newColumnName="pu_region" remarks="区县" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_hospital" newColumnName="pu_hospital" remarks="医院" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_dept" newColumnName="pu_dept" remarks="科室" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_professional" newColumnName="pu_professional" remarks="职称" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_phone" newColumnName="pu_phone" remarks="手机号" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_create_time" newColumnName="pu_create_time" remarks="创建时间" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_user" oldColumnName="u_update_time" newColumnName="pu_update_time" remarks="更新时间" columnDataType="bigint"></renameColumn>

        <renameColumn tableName="prad_comment" oldColumnName="c_id" newColumnName="pc_id" remarks="主键" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_comment" oldColumnName="c_user_id" newColumnName="pc_user_id" remarks="用户id" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_comment" oldColumnName="c_user_name" newColumnName="pc_user_name" remarks="用户名" columnDataType="varchar(128)"></renameColumn>
        <renameColumn tableName="prad_comment" oldColumnName="c_news_id" newColumnName="pc_news_id" remarks="文章主键" columnDataType="bigint"></renameColumn>
        <renameColumn tableName="prad_comment" oldColumnName="c_content" newColumnName="pc_content" remarks="评论内容" columnDataType="varchar(512)"></renameColumn>
        <renameColumn tableName="prad_comment" oldColumnName="c_hits" newColumnName="pc_hits" remarks="本条评论点赞量" columnDataType="int"></renameColumn>
        <renameColumn tableName="prad_comment" oldColumnName="c_time" newColumnName="pc_time" remarks="本条评论时间" columnDataType="bigint"></renameColumn>

        <sqlFile path="updateColumn.sql" relativeToChangelogFile="true"/>
    </changeSet>
</databaseChangeLog>

